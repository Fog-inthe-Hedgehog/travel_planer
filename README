# Create .env :
# BOT_TOKEN=your_telegram_bot_token
# OPENWEATHER_API_KEY=your_openweather_api_key
# AMADEUS_API_KEY=your_amadeus_api_key
# AMADEUS_API_SECRET=your_amadeus_api_secret
# DATABASE_URL=your_database_url
# FOURSQUARE_API_KEY=your_foursquare_api_key
# OPENTRIPMAP_API_KEY=your_opentripmap_api_key
# DEEPSEEK_API_KEY=your_deepseek_api_key

#Install dependencies

brew install python@3.13
python3.13 -m venv .venv
# in VSCode set interpreter to {WORKSPACE_ROOT}/.venv/bin/python
source .venv/bin/activate
# or source .venv/bin/activate.fish
pip install poetry alembic
poetry config virtualenvs.in-project true
poetry install

docker compose up -d

alembic revision --autogenerate -m "Initial migration"
alembic upgrade head

## Docker запуск на удалённом сервере
1. Установите Docker и Docker Compose на сервере.
2. Скопируйте проект на сервер (`git clone …` или `scp -r ./travel_planer user@server:/path`).
3. Создайте файл `.env` в корне проекта со значениями:
   ```
   BOT_TOKEN=...
   OPENWEATHER_API_KEY=...
   AMADEUS_API_KEY=...
   AMADEUS_API_SECRET=...
   FOURSQUARE_API_KEY=...
   OPENTRIPMAP_API_KEY=...
   DEEPSEEK_API_KEY=...
   DATABASE_URL=postgresql://postgres:password@postgres:5432/travel_planner
   ```
4. Соберите и поднимите сервисы: `docker compose up -d --build`.
5. Логи бота: `docker compose logs -f app`.
6. Для пересборки после обновлений кода: `docker compose up -d --build`.
